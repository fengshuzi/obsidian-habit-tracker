# 掌控习惯 - Obsidian 习惯追踪插件

基于日记文件的习惯打卡追踪插件，使用习惯列表 + 最近7天圆点展示打卡记录。

## ✨ 功能特点

- 📊 **习惯列表**：清晰展示所有习惯及其打卡情况
- 🔵 **7天圆点**：最近7天的打卡状态一目了然
- 🔥 **连续打卡**：自动计算连续打卡天数
- ⏰ **时间筛选**：本周、上周、本月、上月快速切换
- 📈 **统计分析**：查看习惯完成次数和趋势
- ⚙️ **自定义配置**：自由配置习惯关键词和名称
- 🎨 **Notion 风格**：现代化的用户界面
- 🚀 **性能优化**：只扫描日期格式文件，快速加载
- 💾 **智能缓存**：30秒缓存 + 文件监听自动更新

## 📝 使用方法

### 1. 在日记中打卡

在你的日记文件（如 `journals/2024-01-10.md`）中，使用标签形式记录打卡：

```markdown
# 2024年1月10日

今天完成的习惯：
#reading
#exercise
#meditation

或者在句子中：
今天完成了 #reading 和 #exercise，感觉很棒！
```

### 2. 查看统计

点击左侧边栏的 ✓ 图标，或使用命令面板搜索"打开掌控习惯"，即可查看：
- 总打卡次数
- 追踪习惯数
- 各习惯完成情况
- 连续打卡天数
- 最近7天打卡圆点

### 3. 时间筛选

使用顶部的时间筛选按钮：
- **本周**：显示本周的打卡记录
- **上周**：显示上周的打卡记录
- **本月**：显示本月的打卡记录（默认）
- **上月**：显示上月的打卡记录

### 4. 配置习惯

点击"配置习惯"按钮，可以：
- **基础设置**：自定义应用名称（默认"掌控习惯"）
- **习惯管理**：添加/删除习惯，修改关键词和中文名称

## ⚙️ 配置说明

### 默认习惯

- `reading` - 阅读
- `exercise` - 运动
- `meditation` - 冥想
- `study` - 学习
- `water` - 喝水
- `sleep` - 早睡

### 自定义习惯

在配置界面的"习惯管理"标签页中：
1. 点击"+ 添加新习惯"
2. 输入关键词（英文，用于在日记中标记）
3. 输入中文名称（用于显示）
4. 点击"保存"

### 自定义应用名称

在配置界面的"基础设置"标签页中：
1. 输入你想要的应用名称（如"我的习惯"）
2. 实时预览效果
3. 点击"保存"后，标签页、页面标题、功能区图标都会更新

## 📊 习惯列表视图

每个习惯显示：
- **习惯名称**：配置的中文名称
- **打卡次数**：在选定时间范围内的总打卡次数
- **连续天数**：当前连续打卡天数（带火焰图标 🔥）
- **7天圆点**：最近7天的打卡状态
  - 绿色圆点：已打卡
  - 灰色圆点：未打卡
  - 鼠标悬停显示日期

## 🔥 连续打卡

- 自动计算每个习惯的连续打卡天数
- 只有今天或昨天有打卡才会显示连续天数
- 中断后重新开始计算

## 🎯 最佳实践

1. **每天记录**：养成每天在日记中记录习惯的习惯
2. **标签形式**：使用 `#关键词` 的标签形式，简单明了
3. **灵活使用**：可以在任何地方使用标签，不限格式
4. **定期回顾**：通过7天圆点和时间筛选回顾自己的坚持情况
5. **适量习惯**：不要追踪太多习惯，专注于最重要的几个

## 🚀 性能优化

- 只扫描 `yyyy-mm-dd.md` 格式的日记文件
- 30秒智能缓存，避免重复扫描
- 文件变化自动检测，立即更新缓存
- 批量并行处理，快速加载

## 📦 安装

1. 将插件文件复制到 `.obsidian/plugins/obsidian-habit-tracker/`
2. 在 Obsidian 设置中启用插件
3. 开始使用！

## 🎨 界面预览

- **统计卡片**：显示总打卡次数、追踪习惯数
- **时间筛选**：本周、上周、本月、上月快速切换
- **习惯列表**：展示每个习惯的完成次数、连续天数和7天圆点
- **习惯统计**：详细的习惯统计信息

## 💡 提示

- 打卡标识符默认为 `#`（标签形式），可在配置文件中修改
- 日记文件路径默认为 `journals`，可在配置文件中修改
- 支持在同一天多次打卡同一个习惯（但只计算一次）
- 标签可以出现在句子的任何位置，灵活方便
- 配置修改后会自动刷新视图

## 🔧 开发

```bash
# 安装依赖
npm install

# 开发模式（监听文件变化）
npm run dev

# 构建生产版本
npm run build

# 部署到所有 vault
npm run deploy
```

## 📋 配置文件示例

```json
{
    "appName": "掌控习惯",
    "habits": {
        "reading": "阅读",
        "exercise": "运动",
        "meditation": "冥想",
        "study": "学习",
        "water": "喝水",
        "sleep": "早睡"
    },
    "habitPrefix": "#",
    "journalsPath": "journals"
}
```

## 🔧 技术特性

- 基于 Obsidian API 开发
- 使用 esbuild 构建
- Notion 风格的现代化 UI
- 响应式设计，支持移动端
- CommonJS 模块格式

## 📝 更新日志

### v1.0.0 (2024-01-10)

- ✨ 初始版本发布
- 📝 支持标签形式打卡
- 📊 习惯列表 + 最近7天圆点显示
- 🔥 连续打卡天数统计
- ⏰ 时间筛选功能（本周、上周、本月、上月）
- ⚡ 性能优化：只扫描日期格式文件
- 💾 智能缓存机制
- 🎯 自定义应用名称
- 🎨 Notion 风格 UI

## 📄 许可证

MIT License
